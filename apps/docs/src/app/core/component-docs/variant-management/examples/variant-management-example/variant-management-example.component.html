<button class="fd-button" (click)="manualUpdateViews()">Manual update views</button>
<fd-toolbar>
    <fd-variant-management
        [views]="views"
        (saveView)="saveView($event)"
        (currentViewChange)="applyViewSettings($event)"
    ></fd-variant-management>
</fd-toolbar>
<table fd-table>
    <thead fd-table-header>
    <tr fd-table-row>
        <th fd-table-cell>
            <div fd-table-inner>
                Column 1
                <ng-container *ngIf="currentView?.settings?.column1">
                    <fd-icon fd-table-icon [fdPopoverTrigger]="popover" [glyph]="currentView.settings.column1.ascending ? 'sort-ascending' : 'sort-descending'"></fd-icon>
                    <fd-popover #popover (isOpenChange)="!$event && updateViewsDueCurrent()">
                        <ul fd-list [compact]="true">
                            <li fd-list-item (click)="currentView.settings.column1.ascending = true; popover.close()">
                                <i fd-list-icon glyph="sort-ascending"></i>
                                <span fd-list-title>Sort Ascending</span>
                            </li>
                            <li fd-list-item (click)="currentView.settings.column1.ascending = false; popover.close()">
                                <i fd-list-icon glyph="sort-descending"></i>
                                <span fd-list-title>Sort Descending</span>
                            </li>
                            <li fd-list-item>
                                <i fd-list-icon glyph="filter"></i>
                                <div fd-form-item [horizontal]="true" (click)="$event.stopPropagation()">
                                    <label fd-form-label for="search-field-column1">Filter</label>
                                    <input fd-form-control
                                        [compact]="true"
                                        id="search-field-column1"
                                        [(ngModel)]="currentView.settings.column1.filterVal">
                                </div>
                            </li>
                        </ul>
                    </fd-popover>
                </ng-container>
            </div>
        </th>
        <th fd-table-cell>Column 2</th>
        <th fd-table-cell>Column 3</th>
        <th fd-table-cell>Date</th>
        <th fd-table-cell>Type</th>
    </tr>
    </thead>
    <tbody fd-table-body>
    <tr *ngFor="let row of displayedRows | sortBy: currentView?.settings?.column1?.ascending: 'column1' | filter: currentView?.settings?.column1?.filterVal : 'column1'" fd-table-row>
        <td fd-table-cell class="fd-has-font-weight-semi">
            <a href="#">{{ row.column1 }}</a>
        </td>
        <td fd-table-cell>{{ row.column2 }}</td>
        <td fd-table-cell>{{ row.column3 }}</td>
        <td fd-table-cell>{{ row.date }}</td>
        <td fd-table-cell><fd-icon [glyph]="row.type"></fd-icon></td>
    </tr>
    </tbody>
</table>
